(this["webpackJsonptask-manager"]=this["webpackJsonptask-manager"]||[]).push([[0],{104:function(e,t,a){e.exports=a(147)},109:function(e,t,a){},132:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){},147:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),o=a.n(c),s=(a(109),a(6)),i=a.n(s),l=a(11),u=a(17),m=a(13),p=a(19),d=a(20),h=a(21),f=a(40),b=a(52),v=a(28),E=a(80),k=a.n(E),w=a(63),g=a.n(w);var j={init:function(){},log:function(e){console.log(e)}},y=a(81),O=a.n(y);function x(){try{return O()(localStorage.getItem("token"))}catch(e){return null}}function S(e){localStorage.setItem("token",e)}function N(e){return"/user/".concat(e)}function D(){return(D=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.post(N("login"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.post(N("register"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C={login:function(e){return D.apply(this,arguments)},register:function(e){return T.apply(this,arguments)},loginWithJwt:S,getCurrentUser:x},F=a(82),A=k.a.create({baseURL:F.a,headers:{Accept:"Application/json","Content-Type":"application/json","todo-auth-token":localStorage.getItem("token")}});A.interceptors.request.use((function(e){return g.a.start(),e})),A.interceptors.response.use((function(e){return g.a.done(),e})),A.interceptors.response.use(null,(function(e){return e.response&&e.response.status>=400&&e.response.status<=500||(j.log(e),b.b.error("An unexpected error occured")),Promise.reject(e)}));var _={get:A.get,post:A.post,patch:A.patch,delete:A.delete};function P(e){return _.get("/project/".concat(e))}function q(e){if(e._id){var t=Object(v.a)({},e);return delete t._id,_.patch("/project/".concat(e._id),t)}return _.post("/project",e)}function I(e){return _.delete("/project/".concat(e))}function U(e){return _.patch("/user/".concat(e,"/approve"))}function z(){return _.get("/user/all")}function B(e){return _.delete("/user/".concat(e))}function M(e){return _.post("/task",e)}function L(e){return _.get("/task/".concat(e))}function J(e){return _.delete("/task/".concat(e))}function W(e){return _.patch("/task/".concat(e,"/done"))}a(132);var $=a(18),R=a.n($),G={name:R.a.string().min(3).required().label("name"),position:R.a.string().min(3).required().label("position"),email:R.a.string().email().required().label("Email"),password:R.a.string().regex(/(?!^[0-9]*$)(?!^[a-zA-Z]*$)^([a-zA-Z0-9]{7,50})$/).error((function(){return{message:"Password must be at least 7 characters long with at least a digit"}}))},Z={email:R.a.string().email().required().label("Email"),password:R.a.string().min(7).required().label("Password")},K={name:R.a.string().min(10).required().label("name"),owner:R.a.any().required().label("owner"),vendor:R.a.string().min(20).required().label("vendor"),description:R.a.string().min(20).required().label("description"),startDate:R.a.any().required().label("Start date"),endDate:R.a.any().required().label("End date"),_id:R.a.any()},V={taskDescription:R.a.string().min(10).required().label("description")};function H(){return G}function Q(){return Z}function X(){return K}function Y(){return V}var ee=a(14),te=a(3),ae=function(e){var t=e.name,a=e.label,n=e.error,c=Object(te.a)(e,["name","label","error"]);return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:t},a),r.a.createElement("input",Object.assign({name:t,id:t,placeholder:a,className:"form-control"},c)),n&&r.a.createElement("small",{className:"danger"},n))},ne=function(e){var t=e.name,a=e.label,n=e.error,c=e.options,o=Object(te.a)(e,["name","label","error","options"]);return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:t},a),r.a.createElement("select",Object.assign({name:t,className:"form-control",id:t},o),r.a.createElement("option",{value:""}),c.map((function(e){return r.a.createElement("option",{key:e._id,value:e._id},e.name)}))),n&&r.a.createElement("small",{className:"danger"},n))},re=function(e){var t=e.name,a=e.error,n=Object(te.a)(e,["name","error"]);return r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",Object.assign({name:t},n)),a&&r.a.createElement("small",{className:"danger"},a))},ce=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={data:{},errors:{}},a.validate=function(){var e=R.a.validate(a.state.data,a.schema,{abortEarly:!1});if(!e.error)return null;var t={},n=!0,r=!1,c=void 0;try{for(var o,s=e.error.details[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var i=o.value;t[i.path[0]]=i.message}}catch(l){r=!0,c=l}finally{try{n||null==s.return||s.return()}finally{if(r)throw c}}return t},a.handleSubmit=function(e){e.preventDefault();var t=a.validate();a.setState({errors:t||{}}),t||a.doSubmit()},a.validateProperty=function(e,t){var n=Object(ee.a)({},e,a.schema[e]),r=Object(ee.a)({},e,t),c=R.a.validate(r,n).error;return c?c.details[0].message:null},a.handleChange=function(e){var t=e.currentTarget,n=t.value;t.files&&a.setState({image:t.files[0]});var r=Object(v.a)({},a.state.errors),c=a.validateProperty(t.name,n);c?r[t.name]=c:delete r[t.name];var o=Object(v.a)({},a.state.data);o[t.name]=n,a.setState({data:o,errors:r})},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"renderButton",value:function(e){return r.a.createElement("button",{disabled:this.validate()},e)}},{key:"selectField",value:function(e,t,a){var n=this.state,c=n.data,o=n.errors;return r.a.createElement(ne,{name:e,label:t,options:a,onChange:this.handleChange,value:c[e],error:o[e]})}},{key:"inputField",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",c=this.state,o=c.data,s=c.errors;return r.a.createElement(ae,{type:a,name:e,value:o[e],label:t,placeholder:n,onChange:this.handleChange,error:s[e]})}},{key:"renderTextArea",value:function(e,t){var a=this.state,n=a.data,c=a.errors;return r.a.createElement(re,{value:n[e],name:e,placeholder:t,onChange:this.handleChange,error:c[e]})}}]),t}(n.Component),oe=a(22),se=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={data:{email:"",password:""},errors:{}},a.schema=Q(),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"doSubmit",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.login(this.state.data);case 3:S(e.sent.headers["todo-auth-token"]),window.location="/",e.next=22;break;case 8:if(e.prev=8,e.t0=e.catch(0),t=e.t0.response,a=Object(v.a)({},this.state.errors),!t){e.next=22;break}if(401!==t.status){e.next=18;break}return a.password="User pending approval",e.abrupt("return",this.setState({errors:a}));case 18:return a.password="Incorrect email or password",e.abrupt("return",this.setState({errors:a}));case 20:e.next=22;break;case 22:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"auth-form"},r.a.createElement("form",{onSubmit:this.handleSubmit},this.inputField("email","Email"),this.inputField("password","Password"),this.renderButton("Login")),r.a.createElement(oe.b,{to:"/register"},"Register")))}}]),t}(ce),ie=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={data:{name:"",email:"",password:"",position:""},errors:{}},a.schema=H(),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"doSubmit",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.register(this.state.data);case 3:this.props.history.push("/login"),e.next=13;break;case 6:if(e.prev=6,e.t0=e.catch(0),!e.t0.response){e.next=13;break}return(t=Object(v.a)({},this.state.errors)).email="User with email exists",e.abrupt("return",this.setState({errors:t}));case 13:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"auth-form"},r.a.createElement("form",{onSubmit:this.handleSubmit},this.inputField("name","Name"),this.inputField("email","Email"),this.inputField("password","Password"),this.inputField("position","Position"),this.renderButton("Submit")))}}]),t}(ce),le=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={data:{name:"",vendor:"",owner:"",description:"",startDate:"",endDate:""},errors:{},ownerOptions:[]},a.schema=X(),a.doSubmit=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q(a.state.data);case 3:a.props.history.push("/"),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])}))),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,a,n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z();case 3:if(t=e.sent,a=t.data,!(n=this.props.match.params.id)){e.next=14;break}return e.next=9,P(n);case 9:(r=(r=e.sent).data)&&((c=Object(v.a)({},this.state.data)).name=r.name,c.vendor=r.vendor,c.owner=r.owner,c.name=r.name,c.description=r.description,c.startDate="",c.endDate="",c._id=r._id,this.setState({data:c,ownerOptions:a,errors:[]})),e.next=15;break;case 14:this.setState({ownerOptions:a,errors:[]});case 15:e.next=19;break;case 17:e.prev=17,e.t0=e.catch(0);case 19:case"end":return e.stop()}}),e,this,[[0,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"auth-form"},r.a.createElement("form",{onSubmit:this.handleSubmit},this.inputField("name","Name"),this.selectField("owner","Owner",this.state.ownerOptions),this.inputField("vendor","Vendor"),this.renderTextArea("description","Enter project description"),this.inputField("startDate","Start","date"),this.inputField("endDate","End","date"),this.renderButton("Submit")))}}]),t}(ce),ue=a(36);function me(e){return e=(e=new Date(e)).toLocaleDateString()}var pe=a(150),de=a(189),he=a(188),fe=a(186),be=a(89),ve=a.n(be),Ee=a(183),ke=a(187),we=a(203),ge=a(190),je=a(191),ye=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(c)))).state={data:{taskDescription:""},tasks:[],newTaskId:"",currProjectId:"",errors:[],open:!1,showTasks:!1},a.schema=Y(),a.componentDidMount=function(){a.getTasks()},a.handleShowTask=function(){a.setState({showTasks:!a.state.showTasks})},a.getTasks=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L();case 3:t=e.sent,a.setState({tasks:t.data}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),a.handleNewTask=function(e){var t=!a.state.newTaskForm;a.props.currProjectId!==e?a.setState({currProjectId:e,newTaskForm:t}):a.setState({newTaskForm:t})},a.handleDone=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W(t);case 3:a.componentDidMount(),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),a.handleClick=function(){var e=a.state.open;a.setState({open:!e})},a.handleTaskDelete=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J(t);case 3:a.componentDidMount(),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),a.renderTaskForm=function(){return r.a.createElement("form",{onSubmit:a.handleSubmit},a.inputField("taskDescription",""),a.renderButton("Add"))},a.doSubmit=Object(l.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.currProjectId,n=a.state.data.taskDescription,e.prev=2,r={description:n,project:t},e.next=6,M(r);case 6:a.getTasks(t),a.setState({data:{taskDescription:""},newTaskForm:!1}),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(2);case 12:case"end":return e.stop()}}),e,null,[[2,10]])}))),a.renderTasks=function(e,t){var n=a.state,c=n.tasks,o=n.newTaskForm,s=n.currProjectId,i=n.showTasks,l=a.props.user;c=c.filter((function(t){return t.project===e}));var u="fa fa-";u+=o?"minus":"plus";var m="fa fa-caret-".concat(i?"down":"up");return r.a.createElement("div",null,r.a.createElement(Ee.a,{"aria-labelledby":"nested-list-subheader",subheader:r.a.createElement(fe.a,{component:"div",id:"nested-list-subheader"},r.a.createElement(ke.a,null,r.a.createElement("i",{className:"fa fa-tasks"})),r.a.createElement(he.a,{primary:"Tasks"}),l.isAdmin&&r.a.createElement("i",{onClick:function(){return a.handleNewTask(e)},className:u}),r.a.createElement(ke.a,null,r.a.createElement("i",{className:m,onClick:a.handleShowTask})))},i&&r.a.createElement(r.a.Fragment,null,0===c.length&&"No task yet",c.map((function(e){return r.a.createElement("div",{className:"task",key:e._id},r.a.createElement(pe.a,null,r.a.createElement(he.a,{className:"task-text",primary:e.description,secondary:r.a.createElement(we.a,{color:"".concat(e.done?"primary":"secondary"),label:"".concat(e.done?"Finished":"Pending"),component:"p",size:"small"})})),r.a.createElement(de.a,{edge:"end"},r.a.createElement("div",null,l._id===t&&r.a.createElement(ge.a,{onClick:function(){return a.handleDone(e._id,"".concat(e.done?"undo":"done"))}},"".concat(e.done?"Undo":"Done"))),r.a.createElement(ve.a,{color:"secondary",onClick:function(){return a.handleTaskDelete(e._id)}})),r.a.createElement(je.a,null))})))),o&&s===e&&a.renderTaskForm())},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.ownerId;return r.a.createElement(r.a.Fragment,null,this.renderTasks(t,a))}}]),t}(ce),Oe=a(192),xe=a(193),Se=a(195),Ne=a(194),De=a(57),Te=Object(Oe.a)({root:{minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}),Ce=function(e){var t=Object(n.useState)([]),a=Object(ue.a)(t,2),c=a[0],o=a[1],s=Object(n.useState)(0),u=Object(ue.a)(s,2),m=u[0],p=u[1],d=Te(),h=e.user,f=function(){var t=Object(l.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.param.user,t.prev=1,t.next=4,_.get("/project/all");case 4:n=(n=t.sent).data,"my-projects"===a&&(n=n.filter((function(t){return t.owner._id===e.user._id}))),o(n),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(1);case 12:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(){return t.apply(this,arguments)}}(),b=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I(t);case 3:p(m+1),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:case"end":return e.stop()}}),e)})))()}),[m]),r.a.createElement("div",{className:"all-projects"},0===c.length&&r.a.createElement("p",null,"No project"),c.map((function(t){var a=me(t.startDate),n=me(t.endDate),c=function(e,t){e=new Date;var a=(t=new Date(t)).getTime()-e.getTime();return a=a<0?0:a,Math.round(a/864e5)}(t.startDate,t.endDate);return r.a.createElement("div",{className:"project ".concat(0===c&&"project-red"),key:t._id},r.a.createElement(xe.a,{className:d.root,variant:"outlined"},r.a.createElement(Ne.a,null,r.a.createElement(De.a,{className:d.title,color:"textSecondary",gutterBottom:!0},t.name),r.a.createElement(De.a,{variant:"body2",component:"p"}," ","From:\u2002",a,"\u2003 To:\u2002",n),r.a.createElement(De.a,{variant:"h5",component:"h2"},"benevolent"),r.a.createElement(De.a,{className:d.pos,color:"textSecondary"},"Days left: \u2002",c,r.a.createElement("br",null),"Owner: ",t.owner.name),r.a.createElement(De.a,{variant:"body2",component:"p"},"description: \xa0 ",t.description)),h.isAdmin&&r.a.createElement(Se.a,null,r.a.createElement(ge.a,{size:"small"},r.a.createElement(oe.b,{to:"/project/".concat(t._id)},r.a.createElement("i",{className:"fa fa-pencil-square-o"})," ")),r.a.createElement(ge.a,null,r.a.createElement("i",{onClick:function(){return b(t._id)},className:"fa fa-trash-o"}))),r.a.createElement(Ne.a,null,r.a.createElement(ye,{user:e.user,ownerId:t.owner._id,id:t._id}))))})))},Fe=(a(142),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.user;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce,{param:this.props.match.params,user:e}))}}]),t}(n.Component)),Ae=(a(143),a(90)),_e=a.n(Ae),Pe=a(91),qe=a.n(Pe),Ie=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={users:[]},a.getUsers=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z();case 3:t=e.sent,a.setState({users:t.data}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),a.handleApprove=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U(t);case 3:a.componentDidMount(),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),a.handleUserDel=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B(t);case 3:a.getUsers(),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getUsers();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.users,a=this.props.user;return a=void 0===a?{}:a,r.a.createElement("div",{className:"users-display"},t.map((function(t){return r.a.createElement("div",{className:"user-display",key:t._id},r.a.createElement(xe.a,{variant:"outlined"},r.a.createElement(Ne.a,null,r.a.createElement(De.a,{variant:"h5",component:"h2"},t.name),r.a.createElement(De.a,{color:"textPrimary"}," ",r.a.createElement(_e.a,null)," ",t.email),r.a.createElement(De.a,{variant:"body2",color:"textPrimary"},r.a.createElement(qe.a,null)," ",t.position)),r.a.createElement(Se.a,null,a.isAdmin&&!t.approved&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.a,{size:"small",color:"primary",onClick:function(){return e.handleApprove(t._id)}},"Approve")),a.isAdmin&&t.approved&&r.a.createElement(ge.a,{size:"small",color:"primary",onClick:function(){return e.handleApprove(t._id)}},"Revoke access"),a.isAdmin&&r.a.createElement(ge.a,{size:"small",color:"secondary",onClick:function(){return e.handleUserDel(t._id)}},"Delete"))))})))}}]),t}(n.Component),Ue=function(){localStorage.removeItem("token"),window.location.reload()},ze=a(4),Be=a(200),Me=a(196),Le=a(197),Je=a(198),We=a(92),$e=a.n(We),Re=a(93),Ge=a.n(Re),Ze=a(199),Ke=a(202),Ve=Object(Oe.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1}}}));function He(e){var t=e.user,a=e.toggleSide,n=Ve(),c=r.a.useState(null),o=Object(ue.a)(c,2),s=o[0],i=o[1],l=Boolean(s),u=function(){i(null)};return r.a.createElement("div",{className:n.root},r.a.createElement(Me.a,{position:"static"},r.a.createElement(Le.a,null,r.a.createElement(Je.a,{color:"inherit","aria-label":"menu",size:"small"},r.a.createElement($e.a,{onClick:a("left",!0)})),r.a.createElement(De.a,{variant:"h6",className:n.title},t&&t.name),t&&r.a.createElement("div",null,r.a.createElement(Je.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){i(e.currentTarget)},color:"inherit"},r.a.createElement(Ge.a,null)),r.a.createElement(Ke.a,{id:"menu-appbar",anchorEl:s,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:l,onClose:u},r.a.createElement(Ze.a,{onClick:Ue},"Logout"),r.a.createElement(Ze.a,{onClick:u}," ",r.a.createElement(oe.b,{to:"/users"},"Users")," "))))))}var Qe=Object(Oe.a)({list:{width:250},fullList:{width:"auto"}}),Xe=function(e){var t,a=e.user,n=Qe(),c=r.a.useState({top:!1,left:!1,bottom:!1,right:!1}),o=Object(ue.a)(c,2),s=o[0],i=o[1],l=function(e,t){return function(a){(!a||"keydown"!==a.type||"Tab"!==a.key&&"Shift"!==a.key)&&i(Object(v.a)({},s,Object(ee.a)({},e,t)))}};return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(r.a.Fragment,{key:"left"},r.a.createElement(He,{user:a,toggleSide:l}),r.a.createElement(Be.a,{anchor:"left",open:s.left,onClose:l("left",!1),onOpen:l("left",!0)},(t="left",r.a.createElement("div",{className:Object(ze.a)(n.list,Object(ee.a)({},n.fullList,"top"===t||"bottom"===t)),role:"presentation",onClick:l(t,!1),onKeyDown:l(t,!1)},r.a.createElement(Ee.a,null,a.isAdmin&&r.a.createElement(pe.a,{button:!0},r.a.createElement(oe.b,{to:"/project/new",className:"w3-bar-item w3-button"},r.a.createElement(he.a,{primary:"New Project"}))),r.a.createElement(pe.a,{button:!0},r.a.createElement(oe.b,{to:"/",className:"w3-bar-item w3-button"},r.a.createElement(he.a,{primary:"All projects"}))),r.a.createElement(pe.a,{button:!0},r.a.createElement(oe.b,{to:"/my-projects",className:"w3-bar-item w3-button"}," ",r.a.createElement(he.a,{primary:"My Projects"})," "))),r.a.createElement(je.a,null),r.a.createElement(Ee.a,null,r.a.createElement(pe.a,{button:!0},r.a.createElement(oe.b,{to:"/users",className:"w3-bar-item w3-button"},r.a.createElement(ke.a,null,r.a.createElement("i",{className:"fa fa-users"}),r.a.createElement(he.a,{primary:"Users"})))),r.a.createElement(pe.a,{button:!0},r.a.createElement(oe.b,{to:"",className:"w3-bar-item w3-button",onClick:Ue},r.a.createElement(ke.a,null,r.a.createElement("i",{className:"fa fa-sign-out"}),r.a.createElement(he.a,{primary:"Logout"})))))))))))},Ye=function(e){e.path;var t=e.component,a=e.render,n=Object(te.a)(e,["path","component","render"]);return r.a.createElement(f.b,Object.assign({},n,{render:function(e){return C.getCurrentUser()?t?r.a.createElement(t,e):a(e):r.a.createElement(f.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},et=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={user:{}},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=x())){e.next=7;break}return e.next=4,a=t._id,_.get("/user/".concat(a));case 4:t=(t=e.sent).data,this.setState({user:t});case 7:case"end":return e.stop()}var a}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.state.user.name&&r.a.createElement(Xe,{user:this.state.user}),r.a.createElement(b.a,null),r.a.createElement(f.d,null,r.a.createElement(Ye,{path:"/",exact:!0,component:function(t){return r.a.createElement(Fe,Object.assign({user:e.state.user},t))}}),r.a.createElement(f.b,{path:"/login",exact:!0,render:function(e){return r.a.createElement(se,e)}}),r.a.createElement(f.b,{path:"/register",exact:!0,render:function(e){return r.a.createElement(ie,e)}}),r.a.createElement(Ye,{path:"/project/new",exact:!0,component:function(t){return r.a.createElement(le,Object.assign({user:e.state.user},t))}}),r.a.createElement(Ye,{path:"/project/:id",component:function(t){return r.a.createElement(le,Object.assign({user:e.state.user},t))}}),r.a.createElement(Ye,{path:"/users",render:function(t){return r.a.createElement(Ie,Object.assign({user:e.state.user},t))}}),r.a.createElement(Ye,{path:"/:user",exact:!0,component:function(t){return r.a.createElement(Fe,Object.assign({user:e.state.user},t))}})))}}]),t}(n.Component);a(144),a(145),a(146),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(oe.a,null,r.a.createElement(et,null)," "),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},82:function(e){e.exports=JSON.parse('{"a":"https://task-manager-todo.herokuapp.com/api/v1"}')}},[[104,1,2]]]);
//# sourceMappingURL=main.c53a0180.chunk.js.map